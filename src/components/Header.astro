---
import ToggleSwitch from "./ToggleSwitch.astro";
import ProfilePhoto from "./ProfilePhoto.astro";
import { useTranslations } from "../i18n/utils";
import { languageList } from "../i18n/ui";

const currentLang = Astro.currentLocale || "es";

const translateLabels = useTranslations(
  currentLang as keyof typeof languageList,
);
---

<header class="flex items-center justify-between py-5 px-8 w-full">
  <div class="flex-1 md:flex sm:hidden justify-start">
    <ProfilePhoto />
  </div>

  <div class="flex-1 flex justify-center lg:text-base md:text-sm sm:text-xs">
    <nav class="flex flex-row gap-x-10 opacity-80">
      <a href="#top">{translateLabels("nav.home")}</a>
      <a href="#experience">{translateLabels("nav.experience")}</a>
      <a href="#projects">{translateLabels("nav.projects")}</a>
      <a href="#about" class="whitespace-nowrap"
        >{translateLabels("nav.about")}</a
      >
      <a href="#contact">{translateLabels("nav.contact")}</a>
    </nav>
  </div>

  <div class="flex-1 flex justify-end">
    <ol class="flex items-center mr-4 ml-8 lg:text-base md:text-sm sm:text-xs">
      { 
        Object.entries(languageList).map(([key, label], index, array) => (
          <li
            class={
              index !== array.length - 1
                ? "border-r border-gray-400 px-3"
                : "px-3"
            }
          >
            <a href={`/${key}`}>{label}</a>
          </li>
        ))
      }
    </ol>

    <ToggleSwitch />
  </div>
</header>
